<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Genomics Data Standardization with FHIR – FHIR® for Research Documentation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../modules/fhir-emerging-innovations.html" rel="next">
<link href="../modules/fhir-accessing-data.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<!-- head.html -->
<!-- any content in this file is inserted into <head></head> -->

<script src="../modules/mappings.js"></script>

<script>
// test if local storage is available and inititilize global variable store, code adapted from:
// https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API
function initLocalStorage() {
  let storage;
  try {
    storage = window["localStorage"];
    const x = "__storage_test__";
    storage.setItem(x, x);
    storage.removeItem(x);
    return storage;
  } catch (e) {
    console.log("Error: local storage unavailable.");
    return (
      e instanceof DOMException &&
      // everything except Firefox
      (e.code === 22 ||
        // Firefox
        e.code === 1014 ||
        // test name field too, because code might not be present
        // everything except Firefox
        e.name === "QuotaExceededError" ||
        // Firefox
        e.name === "NS_ERROR_DOM_QUOTA_REACHED") &&
          // acknowledge QuotaExceededError only if there's something already stored
          storage &&
          storage.length !== 0
    );
  }
}

var store = initLocalStorage();
</script>




<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="..">
    <span class="navbar-title">FHIR® for Research Documentation</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../sections/overview" aria-current="page"> 
<span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../sections/working-with-data"> 
<span class="menu-text">Working With Data</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../sections/synthetic-data"> 
<span class="menu-text">Synthetic Data</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../contribute"> 
<span class="menu-text">Questions &amp; Contributions</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mitre/fhir-for-research"> <i class="bi bi-github" role="img" aria-label="View the GitHub repository for this site">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../modules/fhir-from-10000-ft">FHIR for Research</a></li><li class="breadcrumb-item"><a href="../modules/genomics">Genomics Data &amp; FHIR</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sections/overview" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">FHIR for Research</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/fhir-from-10000-ft" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FHIR from 10,000 Feet</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/fhir-from-1000-ft" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FHIR from 1,000 Feet</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/fhir-research" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Real World Research</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/fhir-history" class="sidebar-item-text sidebar-link">
 <span class="menu-text">History of FHIR</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/terminology" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Terminology and FHIR</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/cdms" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Common Data Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/fhir-community" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Community &amp; Documentation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/key-fhir-resources" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FHIR Resources</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/fhir-accessing-data" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using the FHIR API</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/genomics" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Genomics Data &amp; FHIR</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/fhir-emerging-innovations" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Emerging Innovations</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">FHIR API Development</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/new-tech-overview" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FHIR API Technologies</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">SMART on FHIR</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/new-smart-on-fhir-intro" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/new-smart-on-fhir-tech" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Technical Details</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../workshops/smart-on-fhir" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Workshop</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">CDS Hooks</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/new-cds-hooks-intro" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/new-cds-hooks-types" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Types of CDS Hooks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/new-cds-hooks-tech" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Technical Example</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/new-bulk-fhir" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bulk Data Access</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Data Modeling in FHIR</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/data-modeling-reading-igs" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reading IGs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/data-modeling-real-world-igs" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Real World IGs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/data-modeling-writing-igs" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Writing IGs</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#why-fhir-for-genomics-standardization" id="toc-why-fhir-for-genomics-standardization" class="nav-link active" data-scroll-target="#why-fhir-for-genomics-standardization"><span class="header-section-number">1</span> Why FHIR for genomics standardization?</a></li>
  <li><a href="#hl7-genomics-related-fhir-specifications" id="toc-hl7-genomics-related-fhir-specifications" class="nav-link" data-scroll-target="#hl7-genomics-related-fhir-specifications"><span class="header-section-number">2</span> HL7 genomics-related FHIR specifications</a>
  <ul class="collapse">
  <li><a href="#fhir-genomics-reporting-implementation-guide-grig" id="toc-fhir-genomics-reporting-implementation-guide-grig" class="nav-link" data-scroll-target="#fhir-genomics-reporting-implementation-guide-grig"><span class="header-section-number">2.1</span> FHIR Genomics Reporting Implementation Guide (GRIG)</a></li>
  <li><a href="#genomic-base-fhir-resources" id="toc-genomic-base-fhir-resources" class="nav-link" data-scroll-target="#genomic-base-fhir-resources"><span class="header-section-number">2.2</span> Genomic base FHIR resources</a></li>
  <li><a href="#minimum-common-oncology-data-elements-mcode" id="toc-minimum-common-oncology-data-elements-mcode" class="nav-link" data-scroll-target="#minimum-common-oncology-data-elements-mcode"><span class="header-section-number">2.3</span> minimum Common Oncology Data Elements (mCODE)</a></li>
  <li><a href="#phenopackets" id="toc-phenopackets" class="nav-link" data-scroll-target="#phenopackets"><span class="header-section-number">2.4</span> Phenopackets</a></li>
  <li><a href="#other-genomics-related-hl7-specifications" id="toc-other-genomics-related-hl7-specifications" class="nav-link" data-scroll-target="#other-genomics-related-hl7-specifications"><span class="header-section-number">2.5</span> Other genomics-related HL7 specifications</a></li>
  </ul></li>
  <li><a href="#relevant-fhir-tools" id="toc-relevant-fhir-tools" class="nav-link" data-scroll-target="#relevant-fhir-tools"><span class="header-section-number">3</span> Relevant FHIR Tools</a>
  <ul class="collapse">
  <li><a href="#vcf-to-fhir" id="toc-vcf-to-fhir" class="nav-link" data-scroll-target="#vcf-to-fhir"><span class="header-section-number">3.1</span> VCF to FHIR</a></li>
  </ul></li>
  <li><a href="#engaging-with-the-fhir-genomics-community" id="toc-engaging-with-the-fhir-genomics-community" class="nav-link" data-scroll-target="#engaging-with-the-fhir-genomics-community"><span class="header-section-number">4</span> Engaging with the FHIR genomics community</a>
  <ul class="collapse">
  <li><a href="#hl7-clinical-genomics-working-group" id="toc-hl7-clinical-genomics-working-group" class="nav-link" data-scroll-target="#hl7-clinical-genomics-working-group"><span class="header-section-number">4.1</span> HL7 Clinical Genomics Working Group</a></li>
  <li><a href="#codex-fhir-accelerator-domain-genomex" id="toc-codex-fhir-accelerator-domain-genomex" class="nav-link" data-scroll-target="#codex-fhir-accelerator-domain-genomex"><span class="header-section-number">4.2</span> CodeX FHIR Accelerator domain: GenomeX</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header">
<!--
-->

<h1 class="title display-7">Genomics Data Standardization with FHIR</h1>

</header>

<!-- Begin learning objectives block -->


<div class="callout-note callout callout-style-simple no-icon callout-captioned" id="relevant-roles">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Relevant roles:
</div>
</div>
<div class="callout-body-container callout-body">
<ul class="target-roles list-inline">
    <li class="list-inline-item">Investigator</li>
    <li class="list-inline-item">Research Leader</li>
    <li class="list-inline-item">Informaticist</li>
</ul>
</div>
</div>
<!-- End learning objectives block -->

<!-- Hack to add key points block at end of page-->
<!-- End hack to add key points block at end of page-->


<p><a href="https://www.sciencedirect.com/science/article/abs/pii/B9780323898249000021" title="What is translational medicine?">Translational medicine</a> and <a href="https://medlineplus.gov/genetics/understanding/precisionmedicine/definition/" title="What is precision medicine?">precision medicine</a> involve combining clinical and genomic data to derive actionable insights that can be applied at the point of care. Typically, clinical and genomics data come from different sources: clinical data come from systems like electronic health records, laboratory information systems, and other specialty clinical systems, while genomics data are often sourced directly from the <a href="https://en.wikipedia.org/wiki/Bioinformatics">bioinformatics</a> data pipelines responsible for processing source data from DNA sequencing machines.</p>
<p>Developing combined clinical+genomics datasets is currently challenging because there are not widely adopted exchange standards that cover both clinical and genomic data. In their absence, bespoke structural and semantic mappings may be used, which limits reuse and scaling. This is also complicated by the “big data” challenges associated with genomic data due to its breadth and depth: a <em>single</em> human genome ranges from hundreds of megabytes to gigabytes in size, which is larger than most clinical datasets for <em>all</em> patients in a study.</p>
<section id="why-fhir-for-genomics-standardization" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="why-fhir-for-genomics-standardization"><span class="header-section-number">1</span> Why FHIR for genomics standardization?</h2>
<p><a href="http://hl7.org/fhir/" title="Fast Healthcare Interoperability Resources">FHIR</a> provides a cohesive framework for developing a standardized genomic learning health system. It proposes extensible and modular information models, operations, and tooling needed for the exchange and processing of clinical and genomic data.</p>
<p>The HL7 genomics community aspires to address the entire clinical genomics data flow, from ordering to results reporting to evidence generation. This is possible because of the breadth of the HL7 community which has dedicated and collaborative working groups that address each part of the flow.</p>
</section>
<section id="hl7-genomics-related-fhir-specifications" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="hl7-genomics-related-fhir-specifications"><span class="header-section-number">2</span> HL7 genomics-related FHIR specifications</h2>
<section id="fhir-genomics-reporting-implementation-guide-grig" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="fhir-genomics-reporting-implementation-guide-grig"><span class="header-section-number">2.1</span> FHIR Genomics Reporting Implementation Guide (GRIG)</h3>
<p>The <a href="http://hl7.org/fhir/uv/genomics-reporting/index.html">HL7 FHIR Genomics Reporting Implementation Guide</a> (GRIG) provides guidance for a standardized representation of genomics data elements leveraging the FHIR framework of resources and operations, optimized for the genomic data exchange for clinical and research-oriented genomic use cases. The GRIG is a HL7 project under the <a href="https://confluence.hl7.org/display/CGW">HL7 Clinical Genomics Workgroup</a> (CGWG).</p>
<p>The GRIG is very broad in that it tries to meet both the provider and research needs, covering many aspects of genomics reporting, including:</p>
<ul>
<li>Representation of simple discrete variants, structural variants including copy number variants, complex variants as well as gross variations such as extra or missing chromosomes</li>
<li>Representation of both known variants as well as fully describing de novo variations</li>
<li>Germline and somatic variations</li>
<li>Relevance of identified variations from the perspective of disease pathology, pharmacogenomics, transplant suitability (e.g., HLA typing), etc.</li>
<li>Full and partial DNA sequencing, including whole genome and exome studies</li>
</ul>
<p>A high-level diagram summarizing the general FHIR genomics constructs in the GRIG is shown below:</p>
<p><a href="http://hl7.org/fhir/uv/genomics-reporting/general.html#genomics-report"><img src="images/genomics-general-report-overview.png" class="img-fluid" alt="Diagram showing the high-level structure of the FHIR genomics constructs in the HL7 FHIR Genomics Reporting Implementation Guide." width="434"></a></p>
<p>An <a href="http://hl7.org/fhir/uv/genomics-reporting/artifacts.html">artifact index</a> summarizes the genomics-related constructs including information modeling diagrams, FHIR profiles, example FHIR resources for each profile, and additional guidance on searching for genomic-related FHIR resources through 1) standard FHIR search parameters, and 2) FHIR operations that are tailored for bioinformatic tasks.</p>
<p><a href="http://build.fhir.org/ig/HL7/genomics-reporting/operations.html" title="List of FHIR genomic operations">FHIR genomic operations</a> include but are not limited to:</p>
<ul>
<li><p>normalization services</p></li>
<li><p>dynamic diagnostic or therapeutic implications based on a patient’s variants</p></li>
<li><p>retrieving cohorts of patients with specific variants, phenotypes, genotypes, study metadata</p></li>
</ul>
<p><strong>Note:</strong> full specification of FHIR genomic operations are in development with a target ballot date in early 2024.</p>
</section>
<section id="genomic-base-fhir-resources" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="genomic-base-fhir-resources"><span class="header-section-number">2.2</span> Genomic base FHIR resources</h3>
<p>The focus of the <a href="http://hl7.org/fhir/uv/genomics-reporting/index.html">GRIG</a> is on genomics reporting that mostly occurs after annotation and interpretation in a bioinformatics pipeline. There are however additional research-driven needs for more granular data which merited the release of FHIR base resources. These include:</p>
<p><a href="http://hl7.org/fhir/molecularsequence.html"><strong>MolecularSequence</strong></a> - designed for representing molecular sequences. This resource is not be used for other entities such as variant, variant annotations, genotypes, haplotypes, etc. Those entities will be captured in <a href="http://hl7.org/fhir/observation.html">Observation</a> profiles found in the <a href="http://hl7.org/fhir/uv/genomics-reporting/index.html">Genomics Reporting Implementation Guide</a>.</p>
<p><a href="http://hl7.org/fhir/genomicstudy.html"><strong>GenomicStudy</strong></a> - New with FHIR 5.0, the GenomicStudy resource specifies relevant information found in a genomic study, which includes one or more analyses, each serving a specific purpose. These analyses may vary in method (e.g., karyotyping, CNV, or SNV detection), performer, software, devices used, or regions targeted. The use of this resource differs from the Genomics Report profile from the GRIG in that detailed information about the results of the analyses in <a href="http://hl7.org/fhir/genomicstudy.html">GenomicStudy</a> may be represented by <a href="http://hl7.org/fhir/observation.html">Observations</a> and gathered in a <a href="http://hl7.org/fhir/diagnosticreport.html">DiagnosticReport</a>. Both resources may refer back to the originating GenomicStudy to allow navigation.</p>
</section>
<section id="minimum-common-oncology-data-elements-mcode" class="level3" data-number="2.3">
<h3 data-number="2.3" class="anchored" data-anchor-id="minimum-common-oncology-data-elements-mcode"><span class="header-section-number">2.3</span> minimum Common Oncology Data Elements (mCODE)</h3>
<p><a href="http://hl7.org/fhir/us/mcode/STU2.1/">mCODE</a> is a FHIR specification for a minimal and actionable set of cancer data elements. mCODE includes relevant genomic elements since much of cancer research and care is dependent on genomics for disease discovery and therapeutic decision making.</p>
<p>The mCODE standards specifications team works closely with the HL7 CGWG to ensure alignment between mCODE FHIR IG and the GRIG.</p>
</section>
<section id="phenopackets" class="level3" data-number="2.4">
<h3 data-number="2.4" class="anchored" data-anchor-id="phenopackets"><span class="header-section-number">2.4</span> Phenopackets</h3>
<p>The <a href="https://www.ga4gh.org/">Global Alliance for Genomics and Health</a> (GA4GH) <a href="https://www.ga4gh.org/news_item/phenopackets-standardizing-and-exchanging-patient-phenotypic-data/">Phenopacket standard</a> is not a native FHIR-based standard. Rather it is a lightweight specification that intends to support global exchange of computable case-level phenotypic information for all types of disease diagnosis and research. However, the specification was ported to a <a href="http://phenopackets.org/core-ig/ig/branch/master/index.html">GA4GH Phenopacket FHIR Implementation Guide</a> and is currently under development. The Phenopackets designers are working closely with the CCWG to align both standards.</p>
</section>
<section id="other-genomics-related-hl7-specifications" class="level3" data-number="2.5">
<h3 data-number="2.5" class="anchored" data-anchor-id="other-genomics-related-hl7-specifications"><span class="header-section-number">2.5</span> Other genomics-related HL7 specifications</h3>
<p>There are several additional HL7 specifications that may be relevant:</p>
<section id="hl7v2-laboratory-reporting-interface-lri" class="level4">
<h4 class="anchored" data-anchor-id="hl7v2-laboratory-reporting-interface-lri">HL7v2 Laboratory Reporting Interface (LRI)</h4>
<p>The <a href="http://www.hl7.org/implement/standards/product_brief.cfm?product_id=279" title="HL7v2 LRI standard specification">HL7 Version 2.5.1 Implementation Guide: Laboratory Results Interface (LRI)</a> provides guidance on how to communicate laboratory results in general from a (reference) Laboratory’s information system (LIS) to a system interested in receiving and processing lab results (e.g., EHR, Public Health, other Laboratory). It includes a section on sending genetic test results.</p>
<p>Although HL7v2 is considered a legacy data interoperability standard, it is currently the most prevalent means of sending HL7-based structured genetic data from a reference lab to an EHR. Current efforts are underway to address migration strategies from HL7v2 to FHIR-based genomic transport mechanisms.</p>
</section>
<section id="hl7v3-clinical-document-architecture-family-pedigree" class="level4">
<h4 class="anchored" data-anchor-id="hl7v3-clinical-document-architecture-family-pedigree">HL7v3 Clinical Document Architecture Family Pedigree</h4>
<p>The <a href="http://www.hl7.org/implement/standards/product_brief.cfm?product_id=301">HL7 Clinical Genomics Family Health History (Pedigree) Model</a> is a data standard for exchanging family histories among systems. This includes describing a patient’s full pedigree (family and familial relationships) with diseases and conditions, and the option to link genetic data and risk analysis.</p>
<p>The IG was initially released in 2013 and is based on the <a href="http://www.hl7.org/implement/standards/product_brief.cfm?product_id=7">HL7 Clinical Document Architecture (CDA®)</a>, prior to the initial release of the first FHIR standard. Although now considered a legacy standard, it is still used by some clinical applications today.</p>
</section>
</section>
</section>
<section id="relevant-fhir-tools" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="relevant-fhir-tools"><span class="header-section-number">3</span> Relevant FHIR Tools</h2>
<section id="vcf-to-fhir" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="vcf-to-fhir"><span class="header-section-number">3.1</span> VCF to FHIR</h3>
<p><a href="https://bmcbioinformatics.biomedcentral.com/articles/10.1186/s12859-021-04039-1">vcf2fhir</a> is a utility which converts VCF files into HL7 FHIR format, conforming to the HL7 FHIR GRIG. It is open-sourced and available <a href="https://github.com/elimuinformatics/vcf2fhir" title="vcf2fhir github repository">on GitHub</a>.</p>
</section>
</section>
<section id="engaging-with-the-fhir-genomics-community" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="engaging-with-the-fhir-genomics-community"><span class="header-section-number">4</span> Engaging with the FHIR genomics community</h2>
<section id="hl7-clinical-genomics-working-group" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="hl7-clinical-genomics-working-group"><span class="header-section-number">4.1</span> HL7 Clinical Genomics Working Group</h3>
<p>The <a href="https://confluence.hl7.org/display/CGW">HL7 Clinical Genomics Workgroup</a> (CGWG) comprise of a diverse community of researchers, providers, and non-profit specialty organizations primarily focused standards development that supports the semantically meaningful exchange of data between parties interested in clinical, personal, and population genomic information and family health history.</p>
<p>CGWG is is the author and steward of the <a href="http://hl7.org/fhir/uv/genomics-reporting/STU2/">FHIR Genomics Reporting Implementation Guide</a> (discussed above), a FHIR-based specification for the exchange of genomics reporting elements.</p>
</section>
<section id="codex-fhir-accelerator-domain-genomex" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="codex-fhir-accelerator-domain-genomex"><span class="header-section-number">4.2</span> CodeX FHIR Accelerator domain: GenomeX</h3>
<p><a href="https://confluence.hl7.org/display/COD/Genomics">GenomeX</a> is a domain use case under the HL7 <a href="https://confluence.hl7.org/display/COD/CodeX+Home">CodeX FHIR Accelerator</a>. GenomeX consists of a multi-stakeholder community, working together as subject matter experts, to enable high-quality, computable data for the genomics ecosystem. The community aims to ensure that the genomics FHIR-based specifications meet the needs of stakeholders as validated through real-world pilots in designated use cases.</p>
<p>The multi-stakeholder community represents a broad spectrum involved in genomic message and data exchange with representatives that include genomic reference labs, EHR vendors, provider organizations, life sciences, analytic and decision support platforms, and non-profit organizations and consortiums.</p>
<p>Through consensus, GenomeX stakeholders bring a real-world implementation focus in two use cases identified in the development of an integrated and standardized genomics solution in two major areas:</p>
<ol type="1">
<li><p>Standardizing the data exchange of genomic reports from a reference lab to a clinical application.</p>
<p><a href="https://confluence.hl7.org/display/COD/GenomeX+-+Genomics+Data+Exchange"><img src="images/genomics-GX-UC1.png" class="img-fluid" alt="GenomeX use case diagram showing the workflow for standardized exchange of genomics using FHIR."></a></p></li>
<li><p>Standardizing the message exchange and access of genomic data between a genomic repository and consuming applications through FHIR-based operations.</p>
<p><a href="https://confluence.hl7.org/display/COD/GenomeX+-+Genomics+Data+Exchange"><img src="images/genomics-GX-UC2.jpg" class="img-fluid" alt="GenomeX use case diagram showing the workflow for message exchange between a genomic repository and consuming applications using FHIR."></a></p>
<p>The GenomeX community works closely with the HL7 CGWG as a validator and influencer of the existing FHIR specifications through real-world implementations.</p></li>
</ol>


</section>
</section>

</main> <!-- /main -->
<!-- scripts.html -->
<!-- any content in this file is inserted right before </body> -->

<!-- Fix a11y issues with side menu -->
<script>
const elements = document.querySelectorAll('.sidebar-menu-container a.sidebar-item-text[data-bs-toggle="collapse"], .sidebar-menu-container a.sidebar-item-toggle[data-bs-toggle="collapse"]')

elements.forEach(element => {
    element.setAttribute('role', 'group');
});
</script>

<!-- fancy json code viewer -->
<script type="text/javascript" src="https://unpkg.com/dompurify@3.0.1/dist/purify.min.js"></script> <!-- load JS Sanitizer -->
<script>
    function jsonViewer(json, collapsible=false) {
        let TEMPLATES = {
            item: '<div class="json_view__item"><div class="json_view__key">%KEY%</div><div class="json_view__value json_view__value--%TYPE%">%VALUE%</div></div>',
            itemCollapsible: '<label class="json_view__item json_view__item--collapsible"><input type="checkbox" class="json_view__toggle"/><div class="json_view__key">%KEY%</div><div class="json_view__value json_view__value--type-%TYPE%">%VALUE%</div>%CHILDREN%</label>',
            itemCollapsibleOpen: '<label class="json_view__item json_view__item--collapsible"><input type="checkbox" checked class="json_view__toggle"/><div class="json_view__key">%KEY%</div><div class="json_view__value json_view__value--type-%TYPE%">%VALUE%</div>%CHILDREN%</label>'
        };

        function createItem(key, value, type){
            let element = TEMPLATES.item.replace('%KEY%', key);

            if((key == 'div') && (type=='string')) { // Removes Resource.text.div value (looks bloated)
                element = element.replace('%VALUE%', '...');
            } else if(type == 'string') {
                element = element.replace('%VALUE%', '"' + value + '"');
            } else {
                element = element.replace('%VALUE%', value);
            }

            element = element.replace('%TYPE%', type);

            return element;
        }

        function createCollapsibleItem(key, value, type, children){
            let tpl = 'itemCollapsible';

            if(collapsible) {
                tpl = 'itemCollapsibleOpen';
            }

            let element = TEMPLATES[tpl].replace('%KEY%', key);

            element = element.replace('%VALUE%', type);
            element = element.replace('%TYPE%', type);
            element = element.replace('%CHILDREN%', children);

            return element;
        }

        function handleChildren(key, value, type) {
            let html = '';

            for(let item in value) { 
                let _key = item,
                    _val = value[item];

                html += handleItem(_key, _val);
            }

            return createCollapsibleItem(key, value, type, html);
        }

        function handleItem(key, value) {
            let type = typeof value;
 
            if( Array.isArray( value ) ) {
                return handleChildren(key, value, "array");
            }

            if(typeof value === 'object') {        
                return handleChildren(key, value, type);
            }

            return createItem(key, value, type);
        }

        function parseObject(obj) {
            _result = '<div class="json_view">';

            for(let item in obj) { 
                let key = item,
                    value = obj[item];

                _result += handleItem(key, value);
            }

            _result += '</div>';

            return _result;
        }
        
        try {
            return parseObject(JSON.parse(json));
        }
        catch(err) {
            console.log("Could not render JSON viewer: ", err);
            console.log("for string: ", json);
            return null;
        }

    };


    function parseHTML(string) {
        let sanitized = DOMPurify.sanitize(string);
        let parser = new DOMParser();
        return parser.parseFromString(sanitized, "text/html").body.firstChild;
    }

    let jsonCodeBlocks = document.querySelectorAll("code.sourceCode.json");
    jsonCodeBlocks.forEach((jsonCode) => {
        let json = jsonCode.innerText;
        let codeBlock = jsonCode.parentNode.parentNode;
        let uid = codeBlock.id;
        let documentLocation = codeBlock.parentNode;
        let viewerHTML = jsonViewer(json, true);

        let tabContainer = parseHTML(`
          <div>
            <ul class="nav nav-tabs" id="${uid}Tabs" role="tablist">
              <li class="nav-item" role="presentation">
                <button class="nav-link active" id="${uid}ViewerTab" data-bs-toggle="tab" data-bs-target="#${uid}Viewer" type="button" role="tab" aria-controls="${uid}Viewer" aria-selected="true">Viewer</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="${uid}JsonTab" data-bs-toggle="tab" data-bs-target="#${uid}Json" type="button" role="tab" aria-controls="${uid}Json" aria-selected="false">JSON</button>
              </li>
            </ul>
            <div class="tab-content" id="${uid}TabContent" style="height:50vh;overflow:scroll;">
              <div class="tab-pane fade show active" id="${uid}Viewer" role="tabpanel" aria-labelledby="${uid}ViewerTab"></div>
              <div class="tab-pane fade" id="${uid}Json" role="tabpanel" aria-labelledby="${uid}JsonTab"></div>
            </div>
          </div>
        `)

        if( viewerHTML != null ) {
            documentLocation.replaceChild(tabContainer, codeBlock);

            tabContainer.querySelector(`div#${uid}TabContent div#${uid}Viewer`).appendChild( parseHTML(viewerHTML) );
            tabContainer.querySelector(`div#${uid}TabContent div#${uid}Json`).appendChild(codeBlock);
        }
    });
</script>

<script>
// Below function is usable by CC BY-SA 3.0 from https://stackoverflow.com/a/6475125
String.prototype.toTitleCase = function() {
  let i, j, str, lowers, uppers;
  str = this.replace(/([^\W_]+[^\s-]*) */g, function(txt) {
    return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
  });

  // Certain minor words should be left lowercase unless 
  // they are the first or last words in the string
  lowers = ['A', 'An', 'The', 'And', 'But', 'Or', 'For', 'Nor', 'As', 'At', 
  'By', 'For', 'From', 'In', 'Into', 'Near', 'Of', 'On', 'Onto', 'To', 'With'];
  for (i = 0, j = lowers.length; i < j; i++)
    str = str.replace(new RegExp('\\s' + lowers[i] + '\\s', 'g'), 
      function(txt) {
        return txt.toLowerCase();
      });

  // Certain words such as initialisms or acronyms should be left uppercase
  uppers = ['ID', 'TV', 'FHIR'];
  for (i = 0, j = uppers.length; i < j; i++)
    str = str.replace(new RegExp('\\b' + uppers[i] + '\\b', 'g'), 
      uppers[i].toUpperCase());

  return str;
}

// Custom Hack to overwrite Quarto's built in navigators
document.addEventListener("DOMContentLoaded", function() {
    // Get current module and role
    const current_module_slug = window.location.toString().split('/').pop().split('.')[0];
    const role = store.getItem("role");

    //console.log("DEBUG: current module:", current_module, "role: ", role);

    // Get next and prev modules data
    let prev_href, prev_text;
    let next_href, next_text;

    role_module_map.forEach((mapping) => {
        if( mapping.role == role ) {
            for(let i=0; i<mapping.modules.length; i++) {
                if( mapping.modules[i].slug == current_module_slug ) {
                    function slug_to_url(slug) {
                        if( window.location.pathname.includes('modules') ) {
                            // replace "modules/*" in current URL with "modules/<slug>.html"
                            return window.location.toString().replace(/modules\/.*/, "modules/" + slug + ".html");
                        }
                        else {
                            // this case is irrelevant since prev/next buttons are only role-based in modules
                            return window.location.toString() + "/modules/" + slug + ".html";
                        }
                    }
                    
                    prev_href = (i > 0) ? slug_to_url(mapping.modules[i-1].slug) : null;
                    prev_text = (i > 0) ? mapping.modules[i-1].text : null;

                    next_href = (i+1 < mapping.modules.length) ? slug_to_url(mapping.modules[i+1].slug) : null;
                    next_text = (i+1 < mapping.modules.length) ? mapping.modules[i+1].text : null;                
                }
            }
        }
    });


    // Overwrite prev link
    if( prev_href ) {
        const prev_link_elmt = document.querySelector(".page-navigation .nav-page-previous .pagination-link");
        const prev_text_elmt = document.querySelector(".page-navigation .nav-page-previous .pagination-link .nav-page-text");
        if( prev_link_elmt ) {

            prev_link_elmt.href = prev_href
            //prev_link_elmt.classList.add("btn", "btn-outline-custom", "rounded");
            //prev_link_elmt.parentNode.classList.toggle("nav-page");
            prev_text_elmt.innerText = prev_text;
        }
    }

    // Overwrite next link
    if( next_href ) {
        const next_link_elmt = document.querySelector(".page-navigation .nav-page-next .pagination-link");
        const next_text_elmt = document.querySelector(".page-navigation .nav-page-next .pagination-link .nav-page-text");

        if( next_link_elmt ) {
            next_link_elmt.href = next_href;
            //next_link_elmt.classList.add("btn", "btn-outline-custom", "rounded");
            //next_link_elmt.parentNode.classList.toggle("nav-page");
            next_text_elmt.innerText = next_text;
        }
    }

    // if document has #key-points then move pagination to next after it
    key_points = document.querySelector("#key-points");
    if( key_points ) {
        let page_nav = document.querySelector("nav.page-navigation");
        key_points.insertAdjacentElement("afterend", page_nav);
    }

});


// Override style of Quarto page navigation (prev/next buttons)
document.addEventListener("DOMContentLoaded", function() {

    const page_navigators = document.querySelectorAll(".pagination-link");
    page_navigators.forEach((node) => {

        node.classList.add("btn", "btn-outline-custom", "rounded");
        node.parentNode.classList.remove("nav-page");
        node.parentNode.parentNode.style.gridRow = "initial";
    });
});

// Set external links to open in a new tab
document.addEventListener("DOMContentLoaded", function() {
    var all_links = document.querySelectorAll('a');
    for (var i = 0; i < all_links.length; i++){
        var a = all_links[i];
        if(a.hostname != location.hostname) {
                a.target = '_blank';
        }
    }
})

</script>

<!-- Fancy Box -->
<script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css">
<script>
    document.addEventListener("DOMContentLoaded", function() {
        Fancybox.bind("[data-fancybox]", {
            Toolbar: {
                enabled: true,
            }
        });
    })
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/mitre\.github\.io\/fhir-for-research\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../modules/fhir-accessing-data" class="pagination-link" aria-label="Using the FHIR API">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Using the FHIR API</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../modules/fhir-emerging-innovations" class="pagination-link" aria-label="Emerging Innovations">
        <span class="nav-page-text">Emerging Innovations</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>© 2024 The MITRE Corporation / <a href="https://github.com/mitre/fhir-for-research/README.md">License information</a><br>Approved for Public Release / Case #23-0966 &amp; #24-0169<br><br>HL7® and FHIR® are the registered trademarks of <a href="https://hl7.org">Health Level Seven International (HL7)</a>.<br>Use of the HL7 and FHIR trademarks does not constitute an HL7 endorsement of this website.</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>